service: better-sqlite3-lambda-layer
frameworkVersion: "3"

provider:
  name: aws
  runtime: ${env:RUNTIME}.x
  memorySize: 128
  logRetentionInDays: 14

package:
  exclude:
    - node_modules/**
    - build/**
  
  
functions:
  example:
    handler: example/handler.hello
    description: An example of how to use the better-sqlite3 Lambda layer
    # layers: 
      # - {Ref: BetterSqlite3LambdaLayer}
      #- arn:aws:lambda:us-east-1:284387765956:layer:BetterSqlite3:9
    

layers:
  BetterSqlite3:
    name: better-sqlite3-${env:RUNTIME}
    path: layer
    retain: true
    description: A Layer to provide fast SQLite support in node.js Lambda functions using better-sqlite3 {self.provider.runtime}
    compatibleRuntimes:
      - ${env:RUNTIME}.x
    allowedAccounts:
      - '*'
    
